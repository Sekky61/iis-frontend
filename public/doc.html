<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

<head>
	<meta http-equiv="content-type" content="text/html; charset=" UTF-8" />
	<title>Projekt IIS</title>
	<style type="text/css">
		table {
			border-collapse: collapse;
		}

		td,
		th {
			border: 1px solid black;
			padding: 0.3em 0.5em;
			text-align: left;
		}

		dt {
			font-weight: bold;
			margin-top: 0.5em;
		}

		

		.code-block {
			display: block;
			white-space: pre-wrap;
			tab-size: 1;
			max-width: max-content;
			padding-right: 40px;
			padding-left: 20px;
			border-width: 1px;
			border-color:black;
			border-style: solid;
			border-radius: 15px;
		}

		.code-block-second {
			display: block;
			white-space: pre-wrap;
			tab-size: 1;
			max-width: max-content;
			padding-right: 40px;
			padding-left: 20px;
			border-width: 1px;
			border-color:black;
			border-style: solid;
			border-radius: 15px;
			background-color: rgb(192,202,203);
		}


		.method-get {
			box-shadow: 3px 3px 4px black;
			padding: 4px;
			padding-left: 20px;
			border: rgb(255, 127, 80);
			border-width: 3px;
			background-color: rgb(255, 99, 71, 0.5);
			border-style: solid;
			font-size: 17px;
			border-radius: 25px;
		}

		.method-post {
			box-shadow: 3px 3px 4px black;
			padding: 4px;
			padding-left: 20px;
			border: rgb(70, 130, 180);
			border-width: 3px;
			background-color: rgb(135, 206, 235);
			border-style: solid;
			font-size: 17px;
			border-radius: 25px;
		}

		.method-delete {
			box-shadow: 3px 3px 4px black;
			padding: 4px;
			padding-left: 20px;
			border: red;
			border-width: 3px;
			background-color: rgb(240, 128, 128);
			border-style: solid;
			font-size: 17px;
			border-radius: 25px;
		}

		details:hover{
			background-color: rgb(169,169,169);
			border-width: 3px;
			
		}
	

	
	

		details {
			border: 1px solid black;
			border-radius: 25px;
			background-color: rgb(192,202,203);
			padding: 0.3em 0.5em;
			text-align: left;
			padding: 12px;
			margin: 8px;
		}

		details>p {
			box-shadow: 3px 3px 4px black;
		}
	</style>
</head>

<body>

	<!-- Zkontrolujte prosím nastavení kódování v hlavičce dokumentu 
     podle použitého editoru -->

	<h1>Aukce: prodej a nákup zboží a majetku prostřednictvím dražby</h1> <!-- Nahradte názvem svého zadání -->

	<dl>
		<dt>Autoři</dt>
		<dd>Michal Majer
			<!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
			<a href="mailto:xmajer21@stud.fit.vutbr.cz">xmajer21@stud.fit.vutbr.cz</a> -
			Tvorba frontendu, provázání s backendem, databáze, testování
		</dd>
		<dd>Petr Pouč
			<!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
			<a href="mailto:xpoucp01@stud.fit.vutbr.cz">xpoucp01@stud.fit.vutbr.cz</a> -
			Tvorba frontendu, dokumentace, testování
		</dd>
		<dd>Michal Řezník
			<!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
			<a href="mailto:xrezni28@stud.fit.vutbr.cz">xrezni28@stud.fit.vutbr.cz</a> -
			Tvorba databáze
		</dd>
		<dt>URL aplikace</dt>
		<dd>URL aplikace (frontendu): <a href="https://xmajer21-iis.netlify.app/">https://xmajer21-iis.netlify.app/</a>
		</dd>
		<dd>URL backendu: <a href="https://xmajer21-iis.herokuapp.com/">https://xmajer21-iis.herokuapp.com/</a></dd>
	</dl>

	<h2>Uživatelé systému pro testování</h2>
	<div style="display: flex; gap: 1rem;">
		<div>
			<h3>Administrátoři</h3>
			<table>
				<tr>
					<th>Login</th>
					<th>Heslo</th>
				</tr>
				<tr>
					<td>admin1</td>
					<td>iisadmin1</td>
				</tr>
				<tr>
					<td>admin2</td>
					<td>iisadmin2</td>
				</tr>
				<tr>
					<td>admin3</td>
					<td>iisadmin3</td>
				</tr>
			</table>
		</div>
		<div>
			<h3>Licitátoři</h3>
			<table>
				<tr>
					<th>Login</th>
					<th>Heslo</th>
				</tr>
				<tr>
					<td>licitator1</td>
					<td>iislicitator1</td>
				</tr>
				<tr>
					<td>licitator2</td>
					<td>iislicitator2</td>
				</tr>
				<tr>
					<td>licitator3</td>
					<td>iislicitator3</td>
				</tr>
			</table>
		</div>
		<div>
			<h3>Uživatelé</h3>
			<table>
				<tr>
					<th>Login</th>
					<th>Heslo</th>
				</tr>
				<tr>
					<td>user1</td>
					<td>iisuser1</td>
				</tr>
				<tr>
					<td>user2</td>
					<td>iisuser2</td>
				</tr>
				<tr>
					<td>user3</td>
					<td>iisuser3</td>
				</tr>
			</table>
		</div>
	</div>

	<p>(Diagram případů užití není nutné vkládat, pokud IS implementuje role a případy užití definované zadáním.)</p>


	<h2>Implementace</h2>

	<h3>Backend</h3>
	<p>
		todo popis, něco o session cookies
	</p>
	<h4>Komunikace:</h4>
	<p>
		Komunikace využívá formátu JSON, jak data POST dotazů, tak odpovědi. Typický tvar odpovědi je
		<code>{success: bool, message: string, data: OptionalAny}</code>
	</p>
	<h4>Struktura:</h4>
	<code class="code-block-second">
		api/
		├─ admin/
		├─ licit/
		├─ user/
		├─ auction/:id/
		│  ├─ user/
		│  ├─ licit/
		│  ├─ admin/
	</code>
	<p>
		Veřejné endpointy jsou umístěny do kořenů (<code>/api</code>, <code>/api/auction/:id</code>), ostatní podle
		požadovaných práv
	</p>
	<h4>Výčet endpointů:</h4>
	<details>
		<summary>ADMIN</summary>
		End pointy pro uživatele Admin se nachází: /iis-backend/routes/admin/index.js
		<p class="method-get">
			<strong>GET</strong> : /api/admin/stats/sessions
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/admin/db-status
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/admin/server-status
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/admin/users
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/admin/change-user-data/ <br /><br /> <i>Metoda jako parametry bere JSON se
				dvěma klíči: id a userdata - kolekce vlastností ke změně</i><br />
			<code class="code-block">
{
	"id": "4",
  		"user_data": {
		"Jmeno": "admin-changed-my-name",
		"Prijmeni": "last-name-too"
	}
}
				</code>
		</p>
		<p class="method-delete">
			<strong>DELETE</strong> : /api/admin/delete-user/:id
		</p>
	</details>

	<details>
		<summary>LICITÁTOR</summary>
		<p class="method-get">
			<strong>GET</strong> : /api/licit/my-auctions
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/licit/auctions
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/auction/:id/licit/list-participants
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/auction/:id/licit/join
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/auction/:id/licit/confirm
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/auction/:id/licit/start
		</p>
	</details>

	<details>
		<summary>UŽIVATEL</summary>
		<p class="method-get">
			<strong>GET</strong> : /api/auction/:id/user/can-join
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/user/auctions-member
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/user/my-auctions
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/user/set-password <br></br><i>Metoda jako parametry bere JSON se
				dvěma klíči: staré heslo, nové heslo</i><br />
			<code class="code-block">
{
	"id": "4",{
		"old_password": "12345a",
		"new_password": "1234567a"
	}
}
					</code>
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/auction/:id/user/bid <br></br><i>Metoda jako parametr bere JSON - výši nabídky</i><br />
			<code class="code-block">
{
	"bid": 80050
}
					</code>
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/auction/:id/user/upload-photo
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/auction/:id/user/join
		</p>
		<p class="method-delete">
			<strong>DELETE</strong> : /api/auction/:id/user/leave
		</p>
	</details>

	<details>
		<summary>VEŘEJNÉ</summary>
		<p class="method-get">
			<strong>GET</strong> : /api/auction/:id
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/auctions <br></br><i>Tato funkce bere dva GET parametry: offset, number (to značí, kolik aukcí se má načíst od zvoleného offsetu)<br></br>
			<code class="code-block">/api/auctions?offset=0&number=20</code>
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/auction/:id/bids
		</p>
		<p class="method-get">
			<strong>GET</strong> : /api/get-session-info
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/login
			<code class="code-block">
{
	"username": "admin1",
	"password": "iisadmin1"
}
		</code>
		</p>
		<p class="method-post">
			<strong>POST</strong> : /api/register
			<code class="code-block">
{
	"first_name": "Jan",
	"last_name": "Novák",
	"username": "novakjede123",
	"password": "1j2a3nJEBOREC",
	"email": "j.novak@gmail.com"
}
		</code>
		</p>
		
		<p class="method-post">
			<strong>POST</strong> : /api/logout
		</p>
	</details>



	<h3>Databáze</h3>

	<p>ER diagram reprezentující strukturu naší <a
			href="https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1#R7V1bc6M4Gv01rtp9SMoCY%2BzH2O7Mpjpdm5qe1Ozsy5ZiFJuYIC%2BW3XF%2B%2FYiLwEaQQMxVUqqr2giQsc7RkXQ%2BSQz0%2Bevbbx7crn9gCzkDbWi9DfTFQNM0MDTof37KMUwBY2MSpqw824rSkoSf9juKEodR6t620O7sQoKxQ%2BzteeISuy5akrM06Hn41%2Fllz9g5%2F9YtXCEu4ecSOnzqn7ZF1mHqRDOT9H8he7Vm3wzG0%2FDMK2QXR79kt4YW%2FnWSpH8b6HMPYxJ%2Ben2bI8cvPVYu4X23OWfjB%2FOQS4rccPV9dWsfDleuffe2OHz%2Fv%2FcD61dRLgfo7KMf%2FDiYG4PZN%2FsAiY9l8OTkyIqD%2Foit%2F5HAJz9ptiPQIxFq%2BpAmUBwItF3k0QQQHDsO3O7s4PIwZW071j084j1hGbGj2bP9hqzfQ9D8ayl%2B9zQz%2F9DP%2FJlm%2FjN6GP80dOyVSz8vaRH43zjz0I4%2Byz3ckeiKZ9tx5tjBXvD4%2BnBo3t7SAprxhcdKAnkEvZ0kRYX5G8KviHhHekl09kozI2Qjbl9NouNfCVEAS1ufkEQbRYkwIucqzjzBj36IICwBp8bBmYsg%2Fe3Ehs7vtNJAdxWAeY6VX%2BCWh7d%2FQG%2BFSJSwxbZf1N8OtNxiVE7K2MWunxPB2%2Bikg57ZvU%2BYEPzKkI2KI840KApjRv%2FRwpkPr42BQR93To9Bckz%2F%2BZd7ZI7dHfEo0fw8EMX7F%2FIxz8D1Q9p%2FDnaErV4QWr0uZHUO2Yfv5bAN9BEm2JaGbZiCLV0bMS3OZyeQuLVtWcgtjodWGI8TAPSS5R9llpRK6dygQ7nvUmGc4b1r7ThQ4%2Bf8Os4jDue7xeN7qMaoZcCZ3IbXznZbuLTd1X145zjFCKMpRrzl11CjUoYUyq4Bihi9EPk0eXog8uO2RX58IbKV13hk2Sy%2FCxXeKAyG6ApvciDvd%2F53vnZe3huBXzo5nyg5r0fOp23L%2BVRcOZ8UBkN0OWdG1QnKa7RzsMBiXhx86cQc8IaaUvNK1Bxobcs5uNRd67Ceg%2BJ4CC%2FovNX28opckQW9BPryKTrvyG39EMl0Opjrg5uFz43wkxgE%2BUIchIUzIqU25eEGb9igV2jnh80kYwIYykMF3tYhxy1N8LVhdjOYjwaTBdkrZkSXS9SA8AbPvb20SdBoAELBzOOECrLzQfbM1iVrGBDDX%2F044FJfR5ooe3GjoCthdjbIFDTOHlNXDfM03qm5WwTCDANNHraMepPB9hK0kG78x8S942rfAUevtNq3Hm%2FXeKun5VpfnaMX81ZJvcZbOF0X92aAl0%2FM1dypusS89Wi7JvDsKU1Nn4qLgjfaRBZzNXEqv2zUzKm6xLz9YLsm8OQpTc2eipe18H6byGquZk7lM4H34272m2X%2BpGgVHdF0JsllVyAaoC7d1vthl7UfHNGLo92V4Igu9iLEmLqqWdZ5x2xu7xwcKbJMsZESrJCvzVZ2Wl1i33psRBfYTtOVnRYXBW%2BnufAdHbqu8M2gL5%2BiK0%2BtLkVvPUCiC2yp6cpSi3cQ4S21w%2FGAHXigGkrTl8iFIqu78tjyqaFWJ9al7u1HTEaXOm8dlvdRcTyEl3fehPthuw%2BevcbvPXBmmiGBfMrOG3YFF5n0ihelGTBigQ7p1iaOeG9OPJ24mA8SrVAc8YaeIgRPCInaDN76u1vgpxd%2FG2XFh3jDann4wHt%2FDx482FZ%2F4n5NkSLLyxOUFLxp%2BMdxq%2Fhwxgcta%2FAvJh%2FYY6R6EXiJyOMS7ohrb2Td5IBjhSEPK3hjcYGcDVQ6cc6IrPl5gjKCdyP%2FC5f0KzeKE2ec0IE8nOCty%2B8UuqVixDkjRvIwgrctHzxsoRfXngdhSsWJCBt5jEuD96lu9srBZkwYyeNYMs6fjj3hKpcHakGINimyIMTMQDcOX1celjb7Meeg%2FQUhMdsvWhCSBW5tUw5MvpMv0oIQs3j9E33Wgcl33e8WgRh3vodW4VqQEoT4YAbCqNrGukh2TTDk0k12ZJlbVl7ns0JQzer8pet8Ojy1LOatEnmTH3mJvhakBPrSKTobOyhFr1zRs%2BLHjSr65NJRWYcVfVIcDtEVfcIP0AQW8xLAyyfm%2FAAuCLv8jyhH7SOGjIt2vutz0Cb9GFm176DFHO%2BPgzbhR1aLlhW6QgNtosZWcVHwY6t%2F3C1gGPmeB17aP7veNFfopJVghnxN9aU7nMoy7iqv9607aZNL91fo8rjLLAyH8Grfua0Wah13FQdeOjFnTo8S88rFvHUTbSqwiRbzVon5VCoTrQTw0ok5GPJd88fw1Z7%2B0pfwNcCbXHIoOy1zSUyzbhoY9mOLs%2FbttITt%2FfHTwJDveQtkqCXkVc0yAHzX%2BsRSoyfuFo%2Fv9oE%2BhINk8tbKkES%2BJhz0Yz5y%2BwOyL8h%2F6%2FYaAJ3rq1c3JEuoq8QfAD6evVuu6REt0Y5LfUMUkFDa%2BxEo76W0t262ASDwJOSEukraAejcmwfqlXQVCv%2BgcHjD7d9PL2hDchmhTDZtzISZbTuStaFA1t7E8b5WNai3ct2K6kElrlujW08DwLtuIi0EBSXeoCp888yceW7byA3ZD6RaDlqGFtLtSA00ZbTVpvitvx0MMDC700mvcDRWosslvtxnLByxaG9WnM2ZLuaAhNqunLbatL3194QBTWSnTVNOW1IWvNP2gLf2TnRpr8RxE1Xa1eqT2qS9%2FZeEAU3gBSgJd5W2A4235H4SKPJeLmXgl0%2FXM94bF0%2BWE6S1Lz1iM9O77MqzPzsw%2BHaevQsqhwsqspagxxp0tjNai%2FPZDRVZK9g%2BGD2cz26IPZ%2FdUIG1uCyYqZ89n529XUeqmewl6CHf3JixCrDVJvztz2Qfaxei2%2BWB%2BlgF2JKy4Adm4ZLS8N3NO7KBXZf8hqggocSrOFttEt%2F%2BjPaxyHG2sYqzJWUh14z2EtDLJ%2BlmAbsGudaN5wWFH6G7Jq%2FOgPlj9NmQFQHJYxK1p8haoaK1LsuTZGkeciCxD%2Bgs8w%2FK%2F8HX%2FgTZeD8R9kYiJnosix3ee0sU3ZWUN5eRnn61UTojEjRrXEaVAZexgy4PHC10NvZFzhP%2B9S1JSAEXnKaf%2FUpiL6FzDrIDn5Azg8vNKrjrxM58Dv7oJS%2BIkGNkw8I9wX6l9cgar7ALnXscyAEI7FoPb9CfEdqAjdDDG8HIfxSObjTl1vbLJ3zUN5v8J7rX%2F%2FzXSfri7fTgyA5cWtj%2BLX4zHx3%2BdXouuS04YvflsjlkyUfwhNcR1rfJvY4tfStTP8YZ9WNcUf1IOcpmSpKKVo%2BrVCjjKq1tOdWDAg%2BPJ5dFXbfc59VSXxPJau5jpX7eVRSWTCpn%2BAAVV9UC3Waxq%2Bqww1VV72tdBWY2%2Bcu3ZVPjLKN0PlXV1ZznzXss9nrq3PMpjYkWo9dclwsMkkr0lyqn%2B%2BcsnnSrQwZSHak47lC%2ByUnlpDXeJSswrhJc56%2BN4fRE68H1cGzWovd%2BJg%2FIsyloQaD%2Fwu4aW%2FX8efUxutUIXJ1Ltwa%2BOJ5J96S0abHKU7oRSIu28bHI66nfF3kXNYt8gUmnglbk5tujjlUoXa%2BoV6Vxk3Pq6VbpWrkaNUrVKLORGlWtzZRpAVwPtcnHbU2lbYbeLWdLH6V4%2B%2BWOFPfWbuYXN9aPKrBdvaDy2wNrq%2FB4mTmUHRF2MBpfG%2Fow%2FtPOVVPXroepPAsrfUpS40FixUo%2FzmmaOqX0Rd4wIHbl7bLZxfogfau847SfbNLm%2FuSPLQsvW3VNI1V16%2BmjTdKP%2F0nNTRly2qSRmqvJXnPPu5NGx%2BqurhWsu%2FFSwI5UXiNt%2FPar8sbv3Cw4wDJS%2FedPbOzxKHucmHt9qhfANh4vmj8LxeU%2BfqXaQw89jMnp5R7crn9gC%2FlX%2FA0%3D">databáze</a>.
	</p>

	<h2>Instalace</h2>

	<h3>postup instalace na server</h3>

	Frontend na Netlify i Backend na Heroku se automaticky kopíruje a přeloží z odpovídajících Github repozitářů.

	<h4>frontend:</h4>
	<code class="code-block-second">
		npm install
		npm run build
	</code>

	<h4>backend:</h4>
	<code class="code-block-second">
		npm install
		node server.js
	</code>

	<h3>softwarové požadavky</h3>
	Backend je Nodejs aplikace, potřeba je Nodejs (při vývoji použita verze 16.6.1) a NPM (při vývoji použita verze
	7.20.3)
	</br>
	PostgreSQL verze 12.9

	<h3>Konfigurace, inicializace</h3>

	<p>Nastavení proměnných prostředí na backendu - <code>PG_CONN_STRING</code> a <code>SESSION_SECRET</code> </p>

	<p>
		Databáze se inicializuje dvěma kroky
	<ol>
		<li>Založení tabulek definovaných v <code>util/schema.sql</code> (vykonat
			např. pomocí <code>psql</code>)</li>
		<li>Naplnění databáze testovacími daty skriptem <code>util/db_seed.js</code>
			(spustitelný příkazem <code>node util/db_seed.js</code>)</li>
	</ol>
	</p>

	<h2>Známé problémy</h2>
	<p>Zde popište, které body zadání nejsou implementovány a z jakého důvodu. Např. &bdquo;Z časových důvodů nebyla
		implementována správa uživatelů.&rdquo; Pomůžete tím zrychlit hodnocení, když neimplementované funkce nebudeme
		muset dlouze hledat.</p>

	<h3>není řešeno</h3>
	<ol>
		<li>Odebrání licitátorských práv uživateli, který spravuje některé aukce</li>
		<li></li>
	</ol>
	<p></p>

</body>

</html>